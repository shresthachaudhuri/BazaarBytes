<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - BazaarBytes</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.7; /* Improved default line height for better readability */
        }
        header {
            background-color: #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 1rem 0;
        }
        header .logo {
            font-size: 1.8rem;
            color: #d4a373; /* Accent color */
            font-weight: 600; /* Medium font weight for logo */
        }
        header .top-nav ul li a {
            color: #555;
            font-weight: 500;  /* Medium font weight for nav links */
        }
        header .top-nav ul li a:hover {
            color: #d4a373;  /* Accent color on hover */
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto; /* Increased margin for better spacing */
            padding: 2rem;
            background-color: #fff;
            border-radius: 10px; /* Slightly more rounded corners */
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); /* Slightly stronger shadow */
        }
        .product-details {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 2rem; /* Increased margin */
        }
        .product-image-container {
            flex: 1 1 300px;
            max-width: 450px; /* Increased max-width */
            margin-right: 2rem; /* Increased margin */
            overflow: hidden;
            border-radius: 10px; /* More rounded corners */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* Slightly stronger shadow */
            transition: all 0.3s ease; /* Smooth transition for scaling and shadow */
        }
        .product-image-container:hover {
            transform: scale(1.03);  /* Slight scale on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.15); /* Increased shadow on hover */
        }

        .product-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px; /* Ensure image also has rounded corners */
        }
        .product-info {
            flex: 1 1 400px;
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align items to the start (top in LTR) */
        }
        .product-title {
            font-size: 2.2rem; /* Increased font size */
            margin-bottom: 1rem;
            color: #222; /* Darker, more elegant title color */
            font-weight: 700; /* Use 700 for the boldest weight - to make title stand out */
        }
        .product-price {
            font-size: 1.5rem; /* Increased font size */
            color: #d4a373;
            margin-bottom: 1.5rem; /* Increased margin */
            font-weight: 600; /* Medium font weight */
        }
        .product-description {
            font-size: 1.1rem;  /* Increased font size */
            line-height: 1.8; /* Improved line height */
            margin-bottom: 2rem; /* Increased margin */
            color: #444; /* Slightly darker description */
        }
        .add-to-cart, .buy-now-button {
            background-color: #d4a373;
            color: white;
            padding: 0.8rem 2rem; /* Increased padding */
            border: none;
            border-radius: 8px; /* More rounded corners */
            font-size: 1.1rem; /* Increased font size */
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out, transform 0.2s ease; /* Added transform */
            margin-top: 1rem;
            display: inline-flex; /* Use inline-flex for better alignment */
            align-items: center;
            justify-content: center;
            width: fit-content; /* Adjust width to content */
        }
       .add-to-cart:hover {
            background-color: #c08457;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .buy-now-button:hover {
            background-color: #c08457;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             transform: translateY(-2px);
        }

        .feedback-rating {
            color: #777;
            margin-top: 2.5rem; /* Increased margin */
            font-size: 1rem;
        }
        .feedback-rating h3 {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .product-details-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 10px;
            background-color: #f8f8f8;
            border: 1px solid #eee;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Subtle shadow */
        }
        .product-details-section h3 {
            font-size: 1.5rem;
            color: #222;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        .product-details-section p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 1rem;
        }

        .artisan-info, .sustainability-info {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: 10px;
            background-color: #f8f8f8;
            border: 1px solid #eee;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .artisan-info h2, .sustainability-info h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #222;
            font-weight: 600;
        }
        .artisan-description, .sustainability-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }
        .certificate {
            margin-top: 2rem;
            text-align: center;
        }
        .certificate h3 {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        .certificate img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        footer {
            margin-top: 3rem;
            text-align: center;
            color: #888;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .product-details {
                flex-direction: column;
            }
            .product-image-container, .product-info {
                flex: 1 1 100%;
                max-width: 100%;
                margin-right: 0;
            }
            .product-image-container {
                margin-bottom: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">BazaarBytes</div>
        <nav class="top-nav">
            <ul>
                <li><a href="index2.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <div class="product-details" id="product-details-content">
            <div class="product-image-container">
                <img id="product-image" src="" alt="" class="product-image">
            </div>
            <div class="product-info">
                <h1 id="product-title" class="product-title"></h1>
                <p id="product-price" class="product-price"></p>
                <p id="product-description" class="product-description"></p>
                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <a href="#" id="buy-now-button" class="buy-now-button">Buy Now</a>
                    <a id="add-to-cart-button" class="add-to-cart">Add to Cart</a>

                </div>
                
                <div class="feedback-rating">
                    <h3>Feedback Rating</h3>
                    <p>Average Rating: 4.5/5 (Based on 120 reviews)</p>
                </div>
               
            </div>
        </div>
        
        <div class="product-details-section">
            <h3>Product Details</h3>
            <p><strong>Material:</strong> High-quality ceramic, handcrafted using traditional techniques with locally sourced clay.</p>
            <p><strong>Design:</strong> Intricate patterns and vibrant colors, hand-painted by skilled artisans, reflecting the rich cultural heritage .</p>
            <p><strong>Crafting Process:</strong> Each piece undergoes a meticulous process of molding, shaping, painting, and firing, ensuring durability and a unique finish.</p>
            <p><strong>Dimensions:</strong> [Specify dimensions of the product, e.g., Diameter: 10 inches, Height: 12 inches]</p>
            <p><strong>Care Instructions:</strong> Hand wash gently with mild soap. Avoid abrasive cleaners and prolonged exposure to direct sunlight.</p>
            <p><strong>Origin:</strong> Handcrafted in India, supporting local artisan communities.</p>
        </div>

       

        <div class="artisan-info">
            <h2>About the Artisan</h2>
            <p id="artisan-description" class="artisan-description">
                The intricate beauty of this handicraft is a testament to the skill and dedication of the artisans who have preserved this traditional craft for generations.  These artisans, often families working together, meticulously handcraft each piece, employing techniques passed down through centuries.  Their works reflect a deep understanding of materials and processes, transforming simple clay into works of art. The vibrant colors and intricate designs are a reflection of their cultural heritage and artistic vision.  Each piece tells a story of tradition, craftsmanship, and the enduring spirit of the artisan.
            </p>
        </div>

        <div class="sustainability-info">
            <h2>Sustainability</h2>
            <p id="sustainability-description" class="sustainability-description">
               this is not only beautiful but also environmentally sustainable. The process utilizes natural materials like clay, minerals, and water, and the firing process is relatively energy-efficient.  Artisans often source materials locally, reducing transportation emissions.  The durability of the pottery also contributes to its sustainability, as these pieces are meant to last for generations, reducing the need for replacements.  BazaarBytes is committed to supporting these sustainable practices and promoting the work of artisans who prioritize environmental consciousness in their craft.
            </p>
        </div>

        <div class="certificate">
            <h3>Certificate</h3>
            <p>Certified for safe useability by the Organic Certification Board.</p>
            <img src="https://th.bing.com/th/id/OIP.i6qwZuO_6yQa7pgb8ocPLQAAAA?rs=1&pid=ImgDetMain.jpg" alt="Certificate of Safe Useability">
        </div>
    </div>

    <footer>
        &copy; 2025 TradeCommerce. All rights reserved.
    </footer>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
const productId = urlParams.get('id');
const userId = urlParams.get('userId');
const userName = urlParams.get('name');
console.log("buy-product.html userId:", userId); 

// Fix nav links to preserve userId
document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('nav a');
    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && !href.startsWith('http')) {
            link.setAttribute('href', `${href}?userId=${userId}&name=${userName}`);
        }
    });
    updateCartCount()
});

fetch(`/api/product/${productId}`)
    .then(response => response.json())
    .then(product => {
        if(!product){
            document.getElementById('product-details-content').innerHTML = '<p class="error-message">Product not found.</p>';
            return;
        }

        document.getElementById('product-image').src = product.imagePath;
        document.getElementById('product-title').textContent = product.name;
        document.getElementById('product-price').textContent = `â‚¹${product.price}`;
        document.getElementById('product-description').textContent = product.description;
        document.getElementById('buy-now-button').href = `/checkout.html?userId=${userId}&name=${userName}`;

        // Add to Cart
        document.getElementById('add-to-cart-button').addEventListener('click', function(event) {
            event.preventDefault();
            fetch('/api/cart/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    userId: userId,
                    productId: product._id,
                    name: product.name,
                    price: product.price,
                    qty: 1
                })
            })
            .then(res => res.json())
            .then(data => {
                alert('Product added to cart!');
                updateCartCount()
            })
            .catch(err => {
                console.error('Error adding to cart:', err);
                alert('Error adding to cart');
            });
        });
    })
    .catch(error => {
        console.error('Error fetching product details:', error);
    });

    function updateCartCount() {
    fetch(`/api/cart/count?userId=${userId}`)
        .then(res => res.json())
        .then(data => {
            const cartCountElement = document.getElementById('cart-count');
            if(cartCountElement) {
                cartCountElement.textContent = data.count || 0;
            }
        })
        .catch(err => {
            console.error('Error fetching cart count:', err);
        });
}


    </script>
</body>
</html>
